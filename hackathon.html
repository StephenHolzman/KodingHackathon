<!DOCTYPE html>
<meta charset="utf-8"/>
<style>

.axis path, .axis line {
  fill: none;
  stroke: #000;
}

</style>

<div id="main-wrapper"></div>
<script src="d3.js"></script>
<script>


var draw_timeseries_linechart = function(target,id){
    
    var parseDate = d3.time.format("%Y%m%d").parse;

    var margin = {top: 50,right: 150,bottom: 50, left: 150},
        width = window.innerWidth*.8 - margin.right - margin.left,
        height = 400;
        
    var chart = d3.select(target)
                            .append("svg")
                            .attr("id",id)
                            .attr("width", width + margin.left + margin.right)
                            .attr("height", height + margin.top + margin.bottom)
                            .append("g")
                            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
                            
    var xScale = d3.time.scale()
                    .range([0, width])
                    .domain([parseDate('20150601'),parseDate('20151231')]);
                    
    var yScale = d3.scale.linear()
                    .range([height, 0])
                    .domain([0,500000]);
    
    var xAxis = d3.svg.axis()
                    .scale(xScale)
                    .orient("bottom");

    
    var yAxis = d3.svg.axis()
                    .scale(yScale)
                    .orient("left")
                    .ticks(5);
    
    var timeAxis = chart.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

    var moneyAxis = chart.append("g")
            .attr("class", "y axis")
            .call(yAxis);

    var resize = function(){
        width = window.innerWidth*.8 - margin.right - margin.left;
        xScale.range([0, width]);
        yScale.range([height, 0]);

        timeAxis.transition()
            .duration(1)
            .call(xAxis);

    
    };

    d3.select(window).on('resize',resize);

};

draw_timeseries_linechart("#main-wrapper","chart-wrapper");
  
</script>
