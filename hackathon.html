<!DOCTYPE html>
<meta charset="utf-8"/>
<style>

.axis path, .axis line{
  fill: none;
  stroke: #000;
}

.rDebates line{
    stroke: red;
    fill: red;
}

.dDebates line{
    stroke: blue;
    fill: blue;
}
</style>

<div id="main-wrapper"></div>
<script src="d3.js"></script>
<script>
var RepDebates = ["20150806","20150916","20151028","20151110","20151215"]
var DemDebates = ["20151013","20151114","20151219"]
var parseDate = d3.time.format("%Y%m%d").parse;

var draw_timeseries_linechart = function(target,id){
    

    var margin = {top: 50,right: 150,bottom: 50, left: 150},
        width = window.innerWidth - margin.right - margin.left,
        height = 400;
        
    chart = d3.select(target)
                            .append("svg")
                            .attr("id",id)
                            .attr("width", width + margin.left + margin.right)
                            .attr("height", height + margin.top + margin.bottom)
                            .append("g")
                            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
                            
    var xScale = d3.time.scale()
                    .range([0, width])
                    .domain([parseDate('20150601'),parseDate('20151231')]);
                    
    var yScale = d3.scale.linear()
                    .range([height, 0])
                    .domain([0,500000]);
    
    var xAxis = d3.svg.axis()
                    .scale(xScale)
                    .orient("bottom");

    
    var yAxis = d3.svg.axis()
                    .scale(yScale)
                    .orient("left")
                    .ticks(5);
    
    var timeAxis = chart.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);

    var moneyAxis = chart.append("g")
            .attr("class", "y axis")
            .call(yAxis);

    var draw_debate_lines = function(){
        var rDebates = chart.append("g")
                        .attr("class","rDebates");
        var dDebates = chart.append("g")
                        .attr("class","dDebates");

        RepDebates.forEach(function(d) {
            d = parseDate(d);
            var line = rDebates.append("line")
                //.attr("class", "debate")
                .attr("x1", xScale(d))
                .attr("x2", xScale(d))
                .attr("y1", yScale(0))
                .attr("y2", yScale(500000));
        });

        DemDebates.forEach(function(d) {
            d = parseDate(d);
            var line = dDebates.append("line")
                .attr("x1", xScale(d))
                .attr("x2", xScale(d))
                .attr("y1", yScale(0))
                .attr("y2", yScale(500000));
        });
    };
    draw_debate_lines();

    var resize = function(){
        width = window.innerWidth - margin.right - margin.left;
        xScale.range([0, width]);
        yScale.range([height, 0]);

        timeAxis.transition()
            .duration(1)
            .call(xAxis);

        d3.select(".rDebates").remove();
        d3.select(".dDebates").remove();
        draw_debate_lines();
    
    };

    d3.select(window).on('resize',resize);
};


draw_timeseries_linechart("#main-wrapper","chart-wrapper");
  
</script>
